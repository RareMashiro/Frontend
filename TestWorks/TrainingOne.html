<!DOCTYPE html>
<html>
<body>
<script>

'use strict'

// Promise.all([
//     new Promise(resolve => setTimeout(() => resolve(1), 3000)),
//     new Promise(resolve => setTimeout(() => resolve(2), 2000)),
//     new Promise(resolve => setTimeout(() => resolve(3), 1000))
// ]).then(result => alert(JSON.stringify(result)));



// let cache = new Map();

// function loadCached(url) {
//     if (cache.has(url)) {
//         return Promise.resolve(cache.get(url)); // (*)
//     }
    
//     return fetch(url)
//         .then(response => response.text())
//         .then(text => {
//             cache.set(url,text);
//             let div = document.createElement('div');
//             div.class = "description";
//             div.textContent = text;
//             document.body.append(div);

//             setTimeout(() => div.remove(), 5000);
      
//         //return alert(text);
//     });

// }

// loadCached('https://api.github.com/users/RareMashiro');



function calc(a, b, callback) {
    let sum = a + b;
    if(a < 2) callback(new Error('Первый аргумент должен быть больше 2'), null);
    else callback(null, sum);
}

function square(err, sum) {
    if(err) alert(err);
    else alert(`Квадрат полученной суммы: ${sum ** 2}`);
}

//calc(5, 9, square);

function promisification(a, b) {
    return new Promise((resolve, reject) => {
        calc(a, b, (err, sum) => {
            if(err) reject(err);
            else resolve(sum);
        })
    })
}

promisification(2, 10).then(result => square(null, result)).catch(square);

</script>
</body>
</html>